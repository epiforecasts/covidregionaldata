<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="covidregionaldata">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/5/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Testing â€¢ covidregionaldata</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Testing">
<meta property="og:description" content="covidregionaldata">
<meta property="og:image" content="https://epiforecasts.io/covidregionaldata/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
<script src="../darkswitch.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">covidregionaldata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.2.4000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">Home</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/quickstart.html">Getting Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/supported-countries.html">Supported countries</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-other-articles">Other Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-other-articles">
    <a class="dropdown-item" href="../articles/slowstart.html">Package Overview</a>
    <a class="dropdown-item" href="../articles/testing.html">Testing Datasets</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiforecasts/covidregionaldata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>

        
        <li>
          <a class="external-link nav-link" id="css-toggle-btn" aria-label="github">
            <span class="fas fa fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        
        
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="testing_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Testing</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/covidregionaldata/blob/HEAD/vignettes/testing.Rmd" class="external-link"><code>vignettes/testing.Rmd</code></a></small>
      <div class="d-none name"><code>testing.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>This PR moves testing into the class methods, allowing tests to be ran interactively from within the country class object, and from within the existing testing infrastructure.</p>
<p><code>DataClass</code> is the parent class of all country classes, such as <code>Italy</code>, <code>UK</code>, <code>USA</code>, etc. The generic testing function is the method <code>test</code> within <code>DataClass</code>.</p>
<p>Interactively, tests can be ran by doing the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiforecasts.io/covidregionaldata/">covidregionaldata</a></span><span class="op">)</span>
<span class="va">ukdata</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/UK.html">UK</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>level <span class="op">=</span> <span class="st">"1"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co"># could use anything but I used the acutal test one here for simplicity</span>
<span class="va">ukdata</span><span class="op">$</span><span class="fu">test</span><span class="op">(</span>snapshot_dir <span class="op">=</span> <span class="st">"../tests/testthat/custom_data/"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸ¥³</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸ˜¸</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸŒˆ</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸŒˆ</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸ˜¸</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸ¥‡</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸ˜€</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸ¥‡</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸŽ‰</span>
<span class="co">#&gt; <span style="color: #00BB00;">Test passed</span> ðŸŽ‰</span></code></pre></div>
<p>Here, I break down the different components of this function to walk through how the tests are run.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ukdata</span><span class="op">$</span><span class="va">test</span>
<span class="co">#&gt; function (download = FALSE, snapshot_dir = paste0(tempdir(), </span>
<span class="co">#&gt;     "/snapshots"), all = FALSE, ...) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     snapshot_file_name &lt;- paste0(class(self)[1], "_level_", self$level, </span>
<span class="co">#&gt;         ".rds")</span>
<span class="co">#&gt;     dir.create(snapshot_dir, showWarnings = FALSE)</span>
<span class="co">#&gt;     message_verbose(verbose = self$verbose, paste("snapshot to be saved at", </span>
<span class="co">#&gt;         snapshot_dir))</span>
<span class="co">#&gt;     snapshot_path &lt;- file.path(snapshot_dir, snapshot_file_name)</span>
<span class="co">#&gt;     self_copy &lt;- self$clone()</span>
<span class="co">#&gt;     test_download(DataClass_obj = self_copy, download = download, </span>
<span class="co">#&gt;         snapshot_path = snapshot_path)</span>
<span class="co">#&gt;     test_cleaning(DataClass_obj = self_copy)</span>
<span class="co">#&gt;     test_processing(DataClass_obj = self_copy, all = all)</span>
<span class="co">#&gt;     test_return(DataClass_obj = self_copy)</span>
<span class="co">#&gt;     if ("specific_tests" %in% names(self_copy)) {</span>
<span class="co">#&gt;         specific &lt;- paste0("self$specific_tests(\n            self_copy = self_copy,\n            download = download,\n            all = all,\n            snapshot_path = snapshot_path,\n            ...\n          )")</span>
<span class="co">#&gt;         eval(parse(text = specific))</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: 0x7fca85a8d388&gt;</span></code></pre></div>
<p>For a given country, such as the UK, you would make this by calling something like <code>ukdata &lt;- UK$new(level = "1")</code> and can run the steps one by one by calling the respective methods: <code>ukdata$download(); ukdata$clean(); ukdata$process()</code>. To run the tests you would call <code>ukdata$test(shapshot_dir = "place/2/save/snapshots")</code> By default, if <code>snapshot_dir</code> is not given it will use a generic <code>snapsots</code> directory. The <code>snapshot_dir</code> argument specifies a directory to save data snapshots to and if it doesnâ€™t exist it will make it for you. The file is constructed internally from the object you are testing and the data level, e.g.Â <code>Uk_level_1.rds</code>. Rather than running tests on your active class, the code first makes a clone of your class which is then used for tests: <code>self_copy &lt;- self$clone()</code> The snapshot path is the path to a rds file where you either have stored some raw downloaded data to test, or where you want a downloaded snapshot of the data to end up. This is handled by the function <code><a href="../reference/test_download.html">test_download()</a></code>. The cloned class is passed to this function, along with the download parameter, which dictates whether to overwrite the snapshot file provided.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">test_download</span>
<span class="co">#&gt; function (DataClass_obj, download, snapshot_path) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     if (!file.exists(snapshot_path)) {</span>
<span class="co">#&gt;         download &lt;- TRUE</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt;     if (download) {</span>
<span class="co">#&gt;         testthat::test_that(paste0(DataClass_obj$data_name, " downloads sucessfully"), </span>
<span class="co">#&gt;             {</span>
<span class="co">#&gt;                 DataClass_obj$download()</span>
<span class="co">#&gt;                 walk(DataClass_obj$data$raw, function(data) {</span>
<span class="co">#&gt;                   testthat::expect_s3_class(data, "data.frame")</span>
<span class="co">#&gt;                   testthat::expect_true(nrow(data) &gt; 0)</span>
<span class="co">#&gt;                   testthat::expect_true(ncol(data) &gt;= 2 || typeof(data[[1]]) == </span>
<span class="co">#&gt;                     "list")</span>
<span class="co">#&gt;                 })</span>
<span class="co">#&gt;             })</span>
<span class="co">#&gt;         DataClass_obj$data$raw &lt;- map(DataClass_obj$data$raw, </span>
<span class="co">#&gt;             slice_tail, n = 250)</span>
<span class="co">#&gt;         DataClass_obj$data$raw &lt;- map(DataClass_obj$data$raw, </span>
<span class="co">#&gt;             ~.[, seq_len(min(100, ncol(.)))])</span>
<span class="co">#&gt;         saveRDS(DataClass_obj$data$raw, snapshot_path)</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt;     else {</span>
<span class="co">#&gt;         DataClass_obj$data$raw &lt;- readRDS(snapshot_path)</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x7fca8922be78&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:covidregionaldata&gt;</span></code></pre></div>
<p>As shown by the code, if the data is to be downloaded (either through requesting this with the download parameter or by providing a path to a none existent file) then the download method is called on the class copy (<code>DataClass_obj</code>): <code>DataClass_obj$download()</code>. After this has downloaded the code tests the data is a data.frame, is not empty and has at least 2 columns. The code then takes the first 250 rows to work on, as using the whole data set could be very slow and for the purpose of testing is not needed. This sliced data is then saved to the snapshot file provided for use later on. If the data is not to be downloaded, the snapshot of data saved in the snapshot path is loaded as the raw data <code>DataClass_obj$data$raw</code>.</p>
<p>Once the data is downloaded, the cleaning methods are then tested <code><a href="../reference/test_cleaning.html">test_cleaning()</a></code>. Again this function takes the copied class as the argument and runs through tests on the clean data. These tests check the data is a data.frame, is not empty, has more than 2 columns and that the method <code>avaliable_regions</code> returns a list of characters. In addition, <code>expect_clean_cols</code> checks the date column is an s3 class and that region level column is a character in the cleaned data (<code>data$clean</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">test_cleaning</span>
<span class="co">#&gt; function (DataClass_obj) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     testthat::test_that(paste0(DataClass_obj$data_name, " can be cleaned as expected"), </span>
<span class="co">#&gt;         {</span>
<span class="co">#&gt;             DataClass_obj$clean()</span>
<span class="co">#&gt;             testthat::expect_s3_class(DataClass_obj$data$clean, </span>
<span class="co">#&gt;                 "data.frame")</span>
<span class="co">#&gt;             testthat::expect_true(nrow(DataClass_obj$data$clean) &gt; </span>
<span class="co">#&gt;                 0)</span>
<span class="co">#&gt;             testthat::expect_true(ncol(DataClass_obj$data$clean) &gt;= </span>
<span class="co">#&gt;                 2)</span>
<span class="co">#&gt;             expect_clean_cols(DataClass_obj$data$clean, DataClass_obj$level)</span>
<span class="co">#&gt;         })</span>
<span class="co">#&gt;     testthat::test_that(paste(DataClass_obj$data_name, "highlights available regions as expected"), </span>
<span class="co">#&gt;         {</span>
<span class="co">#&gt;             testthat::expect_error(DataClass_obj$available_regions(), </span>
<span class="co">#&gt;                 NA)</span>
<span class="co">#&gt;             testthat::expect_true(class(DataClass_obj$available_regions()) %in% </span>
<span class="co">#&gt;                 "character")</span>
<span class="co">#&gt;         })</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x7fca89236b00&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:covidregionaldata&gt;</span></code></pre></div>
<p>Once cleaning has been tested <code><a href="../reference/test_processing.html">test_processing()</a></code> is called to process the data and run tests to check it all works. Again this function takes the clone of the class to work on, the same clone which has been called with the preceding functions. These tests check the data is a data.frame, is not empty, has more than 2 columns. In addition <code>expect_processed_cols</code> checks that processed data columns date, cases_new, cases_total, deaths_new, deaths_total and that region level have the correct types.</p>
<p>In processing there is an extra parameter called <code>all</code>. This parameter, if <code>TRUE</code> runs the processing step with both localised as <code>TRUE</code> and <code>FALSE</code>, making another copy of the object to check the localised data on so not to influence further tests. If <code>FALSE</code> processing is ran with localised set to whatever it is set at prior to <code>test()</code> being invoked.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">test_processing</span>
<span class="co">#&gt; function (DataClass_obj, all = FALSE) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     testthat::test_that(paste0(DataClass_obj$data_name, " can be processed as expected"), </span>
<span class="co">#&gt;         {</span>
<span class="co">#&gt;             DataClass_obj$process()</span>
<span class="co">#&gt;             testthat::expect_s3_class(DataClass_obj$data$processed, </span>
<span class="co">#&gt;                 "data.frame")</span>
<span class="co">#&gt;             testthat::expect_true(nrow(DataClass_obj$data$processed) &gt; </span>
<span class="co">#&gt;                 0)</span>
<span class="co">#&gt;             testthat::expect_true(ncol(DataClass_obj$data$processed) &gt;= </span>
<span class="co">#&gt;                 2)</span>
<span class="co">#&gt;             expect_processed_cols(DataClass_obj$data$processed, </span>
<span class="co">#&gt;                 level = DataClass_obj$level, localised = DataClass_obj$localise)</span>
<span class="co">#&gt;             if (all) {</span>
<span class="co">#&gt;                 local_region &lt;- DataClass_obj$clone()</span>
<span class="co">#&gt;                 local_region$localise &lt;- FALSE</span>
<span class="co">#&gt;                 local_region$process()</span>
<span class="co">#&gt;                 expect_processed_cols(local_region$data$processed, </span>
<span class="co">#&gt;                   level = local_region$level, localised = local_region$localise)</span>
<span class="co">#&gt;             }</span>
<span class="co">#&gt;         })</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x7fca89daeef8&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:covidregionaldata&gt;</span></code></pre></div>
<p>After processing the return method is tested with <code>test_return</code> which check the data is a data.frame, is not empty, has more than 2 columns and that all columns contain data and are not just composed of NAs.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">test_return</span>
<span class="co">#&gt; function (DataClass_obj) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     testthat::test_that(paste0(DataClass_obj$data_name, " can be returned as expected"), </span>
<span class="co">#&gt;         {</span>
<span class="co">#&gt;             returned &lt;- DataClass_obj$return()</span>
<span class="co">#&gt;             if (any(class(returned) %in% "data.frame")) {</span>
<span class="co">#&gt;                 testthat::expect_s3_class(returned, "data.frame")</span>
<span class="co">#&gt;                 testthat::expect_true(nrow(returned) &gt; 0)</span>
<span class="co">#&gt;                 testthat::expect_true(ncol(returned) &gt;= 2)</span>
<span class="co">#&gt;             }</span>
<span class="co">#&gt;         })</span>
<span class="co">#&gt;     expect_columns_contain_data(DataClass_obj)</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;bytecode: 0x7fca89f4fbe8&gt;</span>
<span class="co">#&gt; &lt;environment: namespace:covidregionaldata&gt;</span></code></pre></div>
<p>These tests form the generic tests applied to all classes. However, country specific tests are then called by calling the method <code>specific_tests</code> if that country has specific tests defined. So for <code>Italy</code>, where there are no specific tests, no specific tests are called, but for <code>UK</code>, <code>WHO</code> and <code>ECDC</code> specific tests are ran though, which are defined in their own country class. These functions should take a clone of the class as an argument (<code>self_copy</code> ) and any additional arguments they may need, such as a path to NHS included data for <code>UK</code>.</p>
</div>
<div class="section level2">
<h2 id="integration-with-testthat">Integration with <em>testthat</em><a class="anchor" aria-label="anchor" href="#integration-with-testthat"></a>
</h2>
<p>As well as interactive tests the <code>test()</code> method is also used by <code>testthat</code> when conducting package level tests but with the argument <code>all = TRUE</code>. This is done in the file <code>tests/testthat/custom_tests/test_regional_dataset.R</code></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="copyright">
  <p></p>
<p>Developed by Joseph Palmer, Katharine Sherratt, Richard Martin-Nielsen, Jonnie Bevan, Hamish Gibbs, Hugo Gruson, <a href="https://www.lshtm.ac.uk/aboutus/people/funk.sebastian" class="external-link">Sebastian Funk</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
